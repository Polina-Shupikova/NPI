<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор кроссвордов</title>
       <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&family=PT+Serif:wght@400;700&display=swap" rel="stylesheet">

    <style>
         /* Основные советские стили */
        body {
            font-family: 'PT Sans', sans-serif;
            background-color: #f5f5f5;
            background-image: url('https://img.freepik.com/free-photo/vintage-grunge-paper-background_1048-10911.jpg');
            background-size: cover;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        h1 {
            font-family: 'PT Serif', serif;
            font-weight: 700;
            color: #c00;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            background-color: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 5px;
            border-left: 5px solid #c00;
        }

        /* Кнопки в советском стиле */
        .game-btn {
            font-family: 'PT Sans', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 12px 25px;
            background-color: rgba(255, 255, 255, 0.9);
            border: 2px solid #c00;
            border-radius: 5px;
            color: #333;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
        }

        .game-btn:hover {
            background-color: rgba(255, 214, 0, 0.8);
            border-color: #c00;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Ячейки кроссворда */
        .cell input {
            font-family: 'PT Serif', serif;
            font-weight: 700;
            font-size: 1.2em;
            color: #222;
        }

        /* Список слов */
        .word-list {
            font-family: 'PT Sans', sans-serif;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .word-item {
            font-weight: 700;
            margin-bottom: 10px;
        }

        /* Подсказки */
        .word-hint {
            font-family: 'PT Serif', serif;
            font-style: italic;
            font-weight: 400;
        }

        /* Отображение монет */
        .currency-display {
            font-family: 'PT Sans', sans-serif;
            font-weight: 700;
            background-color: rgba(255, 214, 0, 0.9);
            color: #333;
        }
body {
    margin: 0;
    padding: 20px;
    font-family: Arial, sans-serif;

    background-image: url('https://sputnik.kz/img/1375/83/13758368_0:134:1200:813_1920x0_80_0_0_2808ce0f38f73e13552d54b4f4dc14d2.jpg');
    background-size: cover;
    background-attachment: fixed;
    background-position: center;

}
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -1;
}
/* Добавьте эти стили в ваш существующий CSS */
        .title-container {
            display: flex;
            justify-content: center;
            width: 100%;
            margin: 20px 0;
        }

        h1 {
            text-align: center;
            color: #333;
            display: inline-block;
            padding: 15px 30px;
            background-color: rgba(255, 255, 255, 0.7);
            border: 2px solid rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 2.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        h1:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            background-color: rgba(255, 255, 255, 0.9);
        }

        h1 {

            text-align: center;
            color: #696969;
        }
        .controls {
            margin-bottom: 20px;
            text-align: center;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #crossword-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
       #crossword {
    background-color: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    margin: 0 auto;
}
      #crossword word-list {
    background-color: rgba(255, 255, 255, 0.8); /* Полупрозрачный белый фон */
    backdrop-filter: blur(5px); /* Эффект матового стекла */
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
}
        .cell {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            display: inline-block;
            text-align: center;
            line-height: 30px;
            vertical-align: top;
            position: relative;
            background-color: white;
        }
        .cell.black {
            background-color: #696969;
        }
        .cell input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 18px;
            text-transform: uppercase;
            background-color: transparent;
        }
        .cell input:focus {
            outline: 2px solid #4CAF50;
            background-color: #f0fff0;
        }
        .number {
            position: absolute;
            top: 0;
            left: 2px;
            font-size: 10px;
            color: #333;
        }
        .keyboard {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .keyboard-row {
            display: flex;
            margin-bottom: 5px;
        }
        .keyboard-key {
            width: 40px;
            height: 40px;
            margin: 0 3px;
            background-color: #696969;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
        }
        .keyboard-key:hover {
            background-color: #696969;
        }
        .keyboard-key.wide {
            width: 80px;
        }
        .keyboard-key.active {
            background-color: #4CAF50;
            color: white;
        }
        .word-item {
            margin-bottom: 5px;
            break-inside: avoid;
        }
        .hint {
            font-size: 12px;
            color: #666;
        }
        /* Добавьте в секцию style */
.game-header {   text-align: center;
            color: #333;
            display: inline-block;
            padding: 15px 30px;
            background-color: rgba(255, 255, 255, 0.7);
            border: 2px solid rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            font-size: 2.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            }

.currency-display {
  font-weight: bold;
  font-size: 18px;
  color: #e67e22;
}

.shop-button {
  padding: 8px 15px;
  background-color: #2ecc71;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}

.shop-button:hover {
  background-color: #27ae60;
}

.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
  z-index: 2000;
  justify-content: center;
  align-items: center;
}

.modal-content {
  background-color: white;
  padding: 20px;
  border-radius: 8px;
  width: 300px;
  max-width: 90%;
}

.close-modal {
  float: right;
  cursor: pointer;
  font-size: 20px;
}

.hint-option {
  margin: 15px 0;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.buy-hint-btn {
  background-color: #3498db;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 3px;
  cursor: pointer;
  margin-top: 5px;
}

.buy-hint-btn:disabled {
  background-color: #95a5a6;
  cursor: not-allowed;
}
.hint-shop-btn{
    text-align: center;
    color: #333;
    display: inline-block;
    padding: 15px 30px;
    background-color: rgba(255, 255, 255, 0.7);
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    font-size: 2.2em;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);}
        #generate-btn {
            padding: 12px 25px;
            background-color: rgba(255, 255, 255, 0.8); /* Полупрозрачный белый */
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 0 10px;
        }

        #generate-btn:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            border-color: rgba(0, 0, 0, 0.3);
        }

        #generate-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Для контейнера кнопок (если нужно) */
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }
        .word-list {
    background-color: rgba(255, 255, 255, 0.8); /* Полупрозрачный белый фон */
    backdrop-filter: blur(5px); /* Эффект матового стекла */
    border-radius: 10px;
    padding: 15px;
    margin-top: 20px;
    columns: 2; /* Две колонки */
    column-gap: 30px; /* Расстояние между колонками */
    break-inside: avoid; /* Предотвращает разрыв элементов между колонками */
}

.word-item:hover {
    background-color: rgba(255, 255, 255, 0.7);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.word-number {
    font-weight: bold;
    color: #2c3e50;
    margin-right: 8px;
}

.word-hint {
    display: none;
    margin-top: 8px;
    padding: 8px;
    background-color: rgba(233, 247, 239, 0.7);
    border-radius: 5px;
    font-size: 14px;
}

.word-hint.visible {
    display: block;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}
 /* Стиль для панели кнопок */
        .button-panel {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 0 auto 20px;
            max-width: fit-content;
        }

        /* Общий стиль кнопок */
        .game-btn {
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.85);
            border: none;
            border-radius: 6px;
            color: #333;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s ease;
            min-width: 160px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-bottom: 3px solid transparent;
        }



        /* Эффекты при наведении */
        .game-btn:hover {
            background-color: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        /* Адаптивность для мобильных */
        @media (max-width: 700px) {
            .button-panel {
                flex-wrap: wrap;
                max-width: 90%;
            }
            .game-btn {
                min-width: 120px;
                padding: 8px 12px;
                font-size: 14px;
            }
        }
                /* Стиль для отображения монет */
        .currency-display {
            position: fixed;
            top: 15px;
            left: 15px;
            padding: 8px 15px;
            background-color: rgba(255, 215, 0, 0.9); /* Золотой фон */
            color: #333;
            border-radius: 20px;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
            border: 2px solid rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease;
        }

        .currency-display:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }

        .currency-display::before {
            content: "💰";
            margin-right: 8px;
            font-size: 18px;
        }

        /* Анимация при изменении количества */
        @keyframes coinBounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .coin-change {
            animation: coinBounce 0.5s ease;
        }
        /* Советский стиль панели */
.button-panel {
    background-color: rgba(255, 214, 0, 0); /* Советский золотой */
    border: 0px solid #CC0000; /* Советский красный */
    box-shadow: 0 0 10px rgba(204, 0, 0, 0.3);
}

/* Стиль кнопок в советской стилистике */
.game-btn {
    background-color: rgba(255, 255, 255, 0.9);
    color: #222;
    border: 0px solid #CC0000;
    position: relative;
    overflow: hidden;
}

.game-btn:hover {
    background-color: rgba(255, 214, 0, 0.7);
}

.game-btn::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg,
        transparent 45%,
        rgba(255,255,255,0.3) 50%,
        transparent 55%);
    background-size: 200% 200%;
    transition: 0.5s;
}

.game-btn:hover::after {
    background-position: 100% 100%;
}
        @keyframes coinPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.coin-update {
    animation: coinPulse 0.5s ease;
}

#currency-display {
    position: fixed;
    top: 15px;
    left: 15px;
    padding: 8px 15px;
    background-color: rgba(255, 215, 0, 0.9);
    border-radius: 20px;
    font-weight: bold;
    font-size: 16px;
    z-index: 1000;
    border: 2px solid rgba(255, 255, 255, 0.7);
}
        .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.7);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease-out;
}

.modal-content {
    background: linear-gradient(135deg, #2c3e50, #4ca1af);
    border-radius: 15px;
    width: 90%;
    max-width: 500px;
    padding: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    transform: translateY(-20px);
    animation: slideUp 0.4s ease-out forwards;
    color: white;
    position: relative;
    overflow: hidden;
}

.modal-content::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
    transform: rotate(30deg);
}

.close-modal {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 24px;
    color: white;
    cursor: pointer;
    transition: transform 0.2s;
}

.close-modal:hover {
    transform: rotate(90deg);
}

.hint-option {
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 20px;
    margin: 15px 0;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255,255,255,0.2);
    transition: transform 0.3s, box-shadow 0.3s;
}

.hint-option:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    background: rgba(255,255,255,0.15);
}

.hint-option h4 {
    margin: 0 0 10px 0;
    color: #f1c40f;
    font-size: 18px;
}

.hint-option p {
    margin: 5px 0;
    opacity: 0.9;
}

.buy-hint-btn {
    background: linear-gradient(to right, #f1c40f, #e67e22);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 10px;
    width: 100%;
    transition: all 0.3s;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.buy-hint-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.2);
    background: linear-gradient(to right, #e67e22, #f1c40f);
}

.buy-hint-btn:disabled {
    background: #95a5a6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.coin-icon {
    display: inline-block;
    width: 20px;
    height: 20px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23f1c40f"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/></svg>');
    background-repeat: no-repeat;
    margin-right: 5px;
    vertical-align: middle;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Анимация при покупке */
.hint-purchased {
    animation: pulse 0.5s;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Адаптивность */
@media (max-width: 600px) {
    .modal-content {
        width: 95%;
        padding: 15px;
    }

    .hint-option {
        padding: 15px;
    }
}

    </style>
</head>
<body>
 <div class="title-container">
        <h1>☭ Генератор кроссвордов</h1>
       <div id="currency-display" class="currency-display">100</div>

    </div>
       <div class="button-panel soviet-font">
    <button id="generate-btn" class="game-btn">
        <span class="emoji-icon">☭</span> Сгенерировать
    </button>
    <button id="check-btn" class="game-btn">
        <span class="emoji-icon">☭</span> Проверить
    </button>
    <button id="hint-shop-btn" class="game-btn">
        <span class="emoji-icon">☭</span> Подсказки
    </button>
    </div>



    <div id="crossword-container">
        <div id="crossword"></div>
    </div>

    <div class="keyboard">
        <div class="keyboard-row">
            <button class="keyboard-key" data-key="Й">Й</button>
            <button class="keyboard-key" data-key="Ц">Ц</button>
            <button class="keyboard-key" data-key="У">У</button>
            <button class="keyboard-key" data-key="К">К</button>
            <button class="keyboard-key" data-key="Е">Е</button>
            <button class="keyboard-key" data-key="Н">Н</button>
            <button class="keyboard-key" data-key="Г">Г</button>
            <button class="keyboard-key" data-key="Ш">Ш</button>
            <button class="keyboard-key" data-key="Щ">Щ</button>
            <button class="keyboard-key" data-key="З">З</button>
            <button class="keyboard-key" data-key="Х">Х</button>
            <button class="keyboard-key" data-key="Ъ">Ъ</button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-key" data-key="Ф">Ф</button>
            <button class="keyboard-key" data-key="Ы">Ы</button>
            <button class="keyboard-key" data-key="В">В</button>
            <button class="keyboard-key" data-key="А">А</button>
            <button class="keyboard-key" data-key="П">П</button>
            <button class="keyboard-key" data-key="Р">Р</button>
            <button class="keyboard-key" data-key="О">О</button>
            <button class="keyboard-key" data-key="Л">Л</button>
            <button class="keyboard-key" data-key="Д">Д</button>
            <button class="keyboard-key" data-key="Ж">Ж</button>
            <button class="keyboard-key" data-key="Э">Э</button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-key wide" data-key="BACKSPACE">←</button>
            <button class="keyboard-key" data-key="Я">Я</button>
            <button class="keyboard-key" data-key="Ч">Ч</button>
            <button class="keyboard-key" data-key="С">С</button>
            <button class="keyboard-key" data-key="М">М</button>
            <button class="keyboard-key" data-key="И">И</button>
            <button class="keyboard-key" data-key="Т">Т</button>
            <button class="keyboard-key" data-key="Ь">Ь</button>
            <button class="keyboard-key" data-key="Б">Б</button>
            <button class="keyboard-key" data-key="Ю">Ю</button>
            <button class="keyboard-key wide" data-key="ENTER">Enter</button>
        </div>
    </div>

    <div id="word-list" class="word-list"></div>

    <script>
        // Добавьте в начало скрипта, после объявления wordList
let gameCurrency = 100;
const hintPrices = {
  'letter': 5,    // Показать одну букву
  'word': 15,     // Показать все слово
};

// Функция для обновления отображения валюты
function updateCurrencyDisplay() {
  document.getElementById('currency-display').textContent = `${gameCurrency}`;
}

// Функция для создания модального окна магазина
function createHintShop() {
  const modal = document.createElement('div');
  modal.className = 'modal';
  modal.id = 'hint-shop';

  modal.innerHTML = `
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3>Магазин подсказок</h3>
      <div class="hint-option">
        <h4>Показать одну букву</h4>
        <p>Цена: ${hintPrices['letter']} монет</p>
        <button class="buy-hint-btn" data-type="letter">Купить</button>
      </div>
      <div class="hint-option">
        <h4>Показать все слово</h4>
        <p>Цена: ${hintPrices['word']} монет</p>
        <button class="buy-hint-btn" data-type="word">Купить</button>
      </div>
    </div>
  `;

  document.body.appendChild(modal);

  // Обработчики для модального окна
  modal.querySelector('.close-modal').addEventListener('click', () => {
    modal.style.display = 'none';
  });

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  });

  // Обработчики для кнопок покупки
  modal.querySelectorAll('.buy-hint-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const hintType = this.getAttribute('data-type');
      buyHint(hintType);
    });
  });
}

// Функция покупки подсказки
function buyHint(hintType) {
  if (gameCurrency >= hintPrices[hintType]) {
    gameCurrency -= hintPrices[hintType];
    updateCurrencyDisplay();

    switch(hintType) {
      case 'letter':
        revealRandomLetter();
        break;
      case 'word':
        revealRandomWord();
        break;
      case 'hint':
        showWordHint();
        break;
    }

    document.getElementById('hint-shop').style.display = 'none';
  } else {
    alert('Недостаточно монет! Решайте кроссворд, чтобы заработать больше.');
  }
}

// Функции для разных типов подсказок
function revealRandomLetter() {
  const emptyCells = Array.from(document.querySelectorAll('#crossword .cell input'))
    .filter(input => !input.value && crossword[input.dataset.row][input.dataset.col]);

  if (emptyCells.length > 0) {
    const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
    const row = randomCell.dataset.row;
    const col = randomCell.dataset.col;
    randomCell.value = crossword[row][col].letter;
    randomCell.style.backgroundColor = '#fffacd';
    alert('Одна буква открыта!');
  } else {
    alert('Все буквы уже заполнены!');
  }
}

function revealRandomWord() {
  const unrevealedWords = placedWords.filter(word => {
    return !Array.from(document.querySelectorAll('#crossword .cell input'))
      .filter(input => {
        const r = input.dataset.row;
        const c = input.dataset.col;
        return crossword[r] && crossword[r][c] &&
               crossword[r][c].words.includes(word.number) &&
               input.value === crossword[r][c].letter;
      }).length;
  });

  if (unrevealedWords.length > 0) {
    const randomWord = unrevealedWords[Math.floor(Math.random() * unrevealedWords.length)];

    for (let i = 0; i < randomWord.word.length; i++) {
      const row = randomWord.horizontal ? randomWord.row : randomWord.row + i;
      const col = randomWord.horizontal ? randomWord.col + i : randomWord.col;

      const input = document.querySelector(`#crossword input[data-row="${row}"][data-col="${col}"]`);
      if (input && !input.value) {
        input.value = crossword[row][col].letter;
        input.style.backgroundColor = '#fffacd';
      }
    }

    alert(`Слово "${randomWord.word}" открыто!`);
  } else {
    alert('Все слова уже разгаданы!');
  }
}

function showWordHint() {
  const wordItems = document.querySelectorAll('.word-item');
  const unrevealedHints = Array.from(wordItems).filter(item =>
    item.querySelector('.word-hint').style.display === 'none'
  );

  if (unrevealedHints.length > 0) {
    const randomHint = unrevealedHints[Math.floor(Math.random() * unrevealedHints.length)];
    randomHint.querySelector('.word-hint').style.display = 'block';
    alert('Подсказка открыта!');
  } else {
    alert('Все подсказки уже открыты!');
  }
}

// Модифицируем функцию checkAnswers для начисления монет
function checkAnswers() {
  let allCorrect = true;
  let correctAnswers = 0;

  document.querySelectorAll('#crossword .cell input').forEach(input => {
    const row = parseInt(input.dataset.row);
    const col = parseInt(input.dataset.col);

    if (crossword[row] && crossword[row][col]) {
      const correctLetter = crossword[row][col].letter;
      const userLetter = input.value.toUpperCase();

      if (userLetter === correctLetter) {
        input.style.backgroundColor = '#e0ffe0';
        correctAnswers++;
      } else {
        input.style.backgroundColor = '#ffe0e0';
        allCorrect = false;
      }
    }
  });

  // Начисляем монеты за правильные ответы
  const earnedCoins = Math.floor(correctAnswers / 2);
  if (earnedCoins > 0) {
    gameCurrency += earnedCoins;
    updateCurrencyDisplay();
  }

  if (allCorrect) {
    gameCurrency += 20; // Бонус за полное решение
    updateCurrencyDisplay();
    alert(`Поздравляем! Вы заработали ${earnedCoins + 20} монет!`);
  }
}

// В конец скрипта добавьте инициализацию магазина
document.addEventListener('DOMContentLoaded', function() {
  // ... остальные обработчики ...

  // Инициализация магазина подсказок
  createHintShop();

  document.getElementById('hint-shop-btn').addEventListener('click', function() {
    document.getElementById('hint-shop').style.display = 'flex';
  });
});
        // Список слов для кроссворда (можно расширить)
        const wordList = [
             {
        word: "СПУТНИК",
        hint: "Первый искусственный спутник Земли, запущенный СССР в 1957 году"
    },
    {
        word: "КОСМОС",
        hint: "Советская программа освоения этого стала прорывом в науке"
    },
    {
        word: "ПИОНЕР",
        hint: "Юный строитель коммунизма в красном галстуке"
    },
    {
        word: "ОКТЯБРЬ",
        hint: "Месяц Великой Октябрьской социалистической революции"
    },
    {
        word: "ЗАВОД",
        hint: "Промышленное предприятие - гордость советской экономики"
    },
    {
        word: "КОЛХОЗ",
        hint: "Коллективное сельскохозяйственное предприятие"
    },
    {
        word: "ПЯТИЛЕТКА",
        hint: "План развития народного хозяйства на пять лет"
    },
    {
        word: "БАМ",
        hint: "Легендарная железнодорожная магистраль в Восточной Сибири"
    },
    {
        word: "СОВЕТ",
        hint: "Основная форма политической организации общества"
    },
    {
        word: "ПАРТИЯ",
        hint: "КПСС - руководящая и направляющая сила советского общества"
    },
    {
        word: "ГАГАРИН",
        hint: "Первый человек в космосе, герой Советского Союза"
    },
    {
        word: "СТАХАНОВ",
        hint: "Шахтер-передовик, чье имя стало символом трудового подвига"
    },
    {
        word: "ПРАВДА",
        hint: "Главная газета Коммунистической партии"
    },
    {
        word: "СЕРПИМОЛОТ",
        hint: "Символ единства рабочих и крестьян"
    },
    {
        word: "ВДНХ",
        hint: "Выставка достижений народного хозяйства в Москве"
    },
    {
        word: "КАМАЗ",
        hint: "Легендарный советский грузовик"
    },
    {
        word: "ЖИГУЛИ",
        hint: "Советский автомобиль, выпускавшийся на ВАЗе"
    },
    {
        word: "СОЮЗ",
        hint: "Многоцелевой космический корабль"
    },
    {
        word: "СОВХОЗ",
        hint: "Государственное сельскохозяйственное предприятие"
    },
    {
        word: "ПОБЕДА",
        hint: "Легендарный советский автомобиль и символ 1945 года"
    },
    {
        word: "ЗАРНИЦА",
        hint: "Военно-спортивная игра для пионеров"
    },
    {
        word: "АРТЕК",
        hint: "Всесоюзный пионерский лагерь на Черном море"
    },
    {
        word: "САМОВАР",
        hint: "Традиционный русский предмет быта с дымком"
    },
    {
        word: "БАЛАЛАЙКА",
        hint: "Русский народный трехструнный инструмент"
    },
    {
        word: "КАЛИНКА",
        hint: "Популярная русская народная песня"
    },
    {
        word: "МАТРЕШКА",
        hint: "Расписная деревянная игрушка с сюрпризом"
    },
    {
        word: "ВАЛЕНКИ",
        hint: "Традиционная русская зимняя обувь"
    },
    {
        word: "УШАНКА",
        hint: "Теплая шапка с опускающимися наушниками"
    },
    {
        word: "ЛАДЬЯ",
        hint: "Древнерусское судно и шахматная фигура"
    },
    {
        word: "БЫЛИНА",
        hint: "Русский народный эпос о богатырях"
    }];

        // Переменные для хранения состояния кроссворда
        let crossword = [];
        let crosswordSize = { rows: 0, cols: 0 };
        let placedWords = [];
        let currentActiveCell = null;

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('generate-btn').addEventListener('click', generateCrossword);
            document.getElementById('check-btn').addEventListener('click', checkAnswers);

            // Обработчики для экранной клавиатуры
            document.querySelectorAll('.keyboard-key').forEach(key => {
                key.addEventListener('click', function() {
                    const keyValue = this.getAttribute('data-key');
                    if (currentActiveCell) {
                        if (keyValue === 'BACKSPACE') {
                            currentActiveCell.value = '';
                            currentActiveCell.dispatchEvent(new Event('input'));
                        } else if (keyValue === 'ENTER') {
                            moveToNextCell();
                        } else {
                            currentActiveCell.value = keyValue;
                            currentActiveCell.dispatchEvent(new Event('input'));
                            moveToNextCell();
                        }
                    }
                });
            });

            // Генерируем кроссворд при загрузке
            generateCrossword();
        });

        // Генерация кроссворда
        function generateCrossword() {
            // Очищаем предыдущий кроссворд
            document.getElementById('crossword').innerHTML = '';
            document.getElementById('word-list').innerHTML = '';
            crossword = [];
            placedWords = [];

            // Копируем список слов для работы

            const availableWords = [...wordList];

            // Выбираем первое слово случайным образом
            const firstWordIndex = Math.floor(Math.random() * availableWords.length);
            const firstWord = availableWords.splice(firstWordIndex, 1)[0];

            // Определяем начальную позицию первого слова (по центру)
            const startRow = 10;
            const startCol = 5;

            // Добавляем первое слово горизонтально
            placeWord(firstWord, startRow, startCol, true);

            // Пытаемся добавить остальные слова
            let attempts = 0;
            const maxAttempts = 100;

            while (availableWords.length > 0 && attempts < maxAttempts) {
                attempts++;

                // Выбираем случайное слово из оставшихся
                const wordIndex = Math.floor(Math.random() * availableWords.length);
                const word = availableWords[wordIndex];

                // Пытаемся разместить слово
                if (tryPlaceWord(word)) {
                    availableWords.splice(wordIndex, 1);
                    attempts = 0; // Сброс счетчика при успешном размещении
                }
            }

            // Определяем границы кроссворда
            determineCrosswordSize();

            // Отрисовываем кроссворд
            renderCrossword();

            // Отображаем список слов
            renderWordList();
        }

        // Попытка разместить слово в кроссворде
        function tryPlaceWord(word) {
            // Сначала пытаемся разместить слово, пересекающееся с уже размещенными
            for (const placedWord of placedWords) {
                // Проверяем все буквы размещенного слова
                for (let i = 0; i < placedWord.word.length; i++) {
                    const letter = placedWord.word[i];

                    // Ищем эту букву в новом слове
                    for (let j = 0; j < word.word.length; j++) {
                        if (word.word[j] === letter) {
                            // Пытаемся разместить новое слово вертикально, если размещенное горизонтально, и наоборот
                            if (placedWord.horizontal) {
                                // Размещаем вертикально
                                const newRow = placedWord.row - j;
                                const newCol = placedWord.col + i;

                                if (canPlaceWord(word, newRow, newCol, false)) {
                                    placeWord(word, newRow, newCol, false);
                                    return true;
                                }
                            } else {
                                // Размещаем горизонтально
                                const newRow = placedWord.row + i;
                                const newCol = placedWord.col - j;

                                if (canPlaceWord(word, newRow, newCol, true)) {
                                    placeWord(word, newRow, newCol, true);
                                    return true;
                                }
                            }
                        }
                    }
                }
            }

            return false;
        }

        // Проверка, можно ли разместить слово в указанной позиции
        function canPlaceWord(word, row, col, horizontal) {
            // Проверяем каждую букву слова
            for (let i = 0; i < word.word.length; i++) {
                const letter = word.word[i];
                const cellRow = horizontal ? row : row + i;
                const cellCol = horizontal ? col + i : col;

                // Проверяем, не выходит ли за границы
                if (cellRow < 0 || cellCol < 0) {
                    return false;
                }

                // Проверяем, не пересекается ли с другим словом (кроме общих букв)
                if (crossword[cellRow] && crossword[cellRow][cellCol]) {
                    if (crossword[cellRow][cellCol].letter !== letter) {
                        return false;
                    }
                }
            }

            // Проверяем, что слово будет иметь хотя бы одно пересечение
            let hasIntersection = false;
            for (let i = 0; i < word.word.length; i++) {
                const cellRow = horizontal ? row : row + i;
                const cellCol = horizontal ? col + i : col;

                if (crossword[cellRow] && crossword[cellRow][cellCol]) {
                    hasIntersection = true;
                    break;
                }
            }

            if (!hasIntersection && placedWords.length > 0) {
                return false;
            }

            return true;
        }

        // Размещение слова в кроссворде
        function placeWord(word, row, col, horizontal) {
            // Создаем объект для размещенного слова
            const placedWord = {
                word: word.word,
                hint: word.hint,
                row,
                col,
                horizontal,
                number: placedWords.length + 1
            };

            placedWords.push(placedWord);

            // Добавляем буквы в кроссворд
            for (let i = 0; i < word.word.length; i++) {
                const letter = word.word[i];
                const cellRow = horizontal ? row : row + i;
                const cellCol = horizontal ? col + i : col;

                // Инициализируем строку, если ее еще нет
                if (!crossword[cellRow]) {
                    crossword[cellRow] = [];
                }

                // Добавляем букву в клетку
                crossword[cellRow][cellCol] = {
                    letter,
                    words: []
                };

                // Добавляем ссылку на слово в клетку
                crossword[cellRow][cellCol].words.push(placedWord.number);
            }
        }

        // Определение размеров кроссворда
        function determineCrosswordSize() {
            let minRow = Infinity;
            let maxRow = -Infinity;
            let minCol = Infinity;
            let maxCol = -Infinity;

            for (let row = 0; row < crossword.length; row++) {
                if (crossword[row]) {
                    for (let col = 0; col < crossword[row].length; col++) {
                        if (crossword[row][col]) {
                            minRow = Math.min(minRow, row);
                            maxRow = Math.max(maxRow, row);
                            minCol = Math.min(minCol, col);
                            maxCol = Math.max(maxCol, col);
                        }
                    }
                }
            }

            crosswordSize = {
                rows: maxRow - minRow + 1,
                cols: maxCol - minCol + 1,
                offsetRow: minRow,
                offsetCol: minCol
            };
        }

        // Отрисовка кроссворда
        function renderCrossword() {
            const crosswordElement = document.getElementById('crossword');
            crosswordElement.innerHTML = '';

            // Создаем клетки кроссворда
            for (let row = 0; row < crosswordSize.rows; row++) {
                const crosswordRow = document.createElement('div');

                for (let col = 0; col < crosswordSize.cols; col++) {
                    const actualRow = row + crosswordSize.offsetRow;
                    const actualCol = col + crosswordSize.offsetCol;

                    const cell = document.createElement('div');
                    cell.className = 'cell';

                    if (crossword[actualRow] && crossword[actualRow][actualCol]) {
                        const cellData = crossword[actualRow][actualCol];

                        // Добавляем номер слова, если это начало слова
                        placedWords.forEach(placedWord => {
                            if ((placedWord.horizontal && placedWord.row === actualRow && placedWord.col === actualCol) ||
                                (!placedWord.horizontal && placedWord.row === actualRow && placedWord.col === actualCol)) {
                                const number = document.createElement('div');
                                number.className = 'number';
                                number.textContent = placedWord.number;
                                cell.appendChild(number);
                            }
                        });

                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.dataset.row = actualRow;
                        input.dataset.col = actualCol;

                        input.addEventListener('focus', function() {
                            currentActiveCell = this;
                            highlightKeyboardKeys();
                        });

                        input.addEventListener('input', function() {
                            this.value = this.value.toUpperCase();
                        });

                        cell.appendChild(input);
                    } else {
                        cell.className = 'cell black';
                    }

                    crosswordRow.appendChild(cell);
                }

                crosswordElement.appendChild(crosswordRow);
            }
        }

        // Отрисовка списка слов
        function renderWordList() {
            const wordListElement = document.getElementById('word-list');

            placedWords.forEach(word => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';

                const wordNumber = document.createElement('span');
                wordNumber.textContent = `${word.number}. `;
                wordNumber.style.fontWeight = 'bold';

                const wordHint = document.createElement('span');
                wordHint.textContent = word.hint;
                wordHint.className = 'hint';

                wordItem.appendChild(wordNumber);
                wordItem.appendChild(wordHint);
                wordListElement.appendChild(wordItem);
            });
        }

        // Проверка ответов
        function checkAnswers() {
            let allCorrect = true;

            document.querySelectorAll('#crossword .cell input').forEach(input => {
                const row = parseInt(input.dataset.row);
                const col = parseInt(input.dataset.col);

                if (crossword[row] && crossword[row][col]) {
                    const correctLetter = crossword[row][col].letter;
                    const userLetter = input.value.toUpperCase();

                    if (userLetter === correctLetter) {
                        input.style.backgroundColor = '#e0ffe0';
                    } else {
                        input.style.backgroundColor = '#ffe0e0';
                        allCorrect = false;
                    }
                }
            });

            if (allCorrect) {
                alert('Поздравляем! Вы правильно решили кроссворд!');
            } else {
                alert('Есть ошибки. Попробуйте еще раз!');
            }
        }

        // Подсветка клавиш на экранной клавиатуре
        function highlightKeyboardKeys() {
            document.querySelectorAll('.keyboard-key').forEach(key => {
                key.classList.remove('active');

                if (currentActiveCell && currentActiveCell.value) {
                    const keyValue = key.getAttribute('data-key');
                    if (keyValue === currentActiveCell.value.toUpperCase()) {
                        key.classList.add('active');
                    }
                }
            });
        }

        // Переход к следующей клетке
        function moveToNextCell() {
            if (!currentActiveCell) return;

            const row = parseInt(currentActiveCell.dataset.row);
            const col = parseInt(currentActiveCell.dataset.col);

            // Находим все слова, которые проходят через эту клетку
            const wordsInCell = crossword[row][col].words;

            if (wordsInCell.length > 0) {
                // Для простоты берем первое слово
                const wordNumber = wordsInCell[0];
                const word = placedWords.find(w => w.number === wordNumber);

                let nextRow, nextCol;

                if (word.horizontal) {
                    // Горизонтальное слово - двигаемся вправо
                    nextRow = row;
                    nextCol = col + 1;

                    // Если достигли конца слова, переходим к следующему слову
                    if (nextCol > word.col + word.word.length - 1) {
                        nextRow = word.row;
                        nextCol = word.col;
                    }
                } else {
                    // Вертикальное слово - двигаемся вниз
                    nextRow = row + 1;
                    nextCol = col;

                    // Если достигли конца слова, переходим к следующему слову
                    if (nextRow > word.row + word.word.length - 1) {
                        nextRow = word.row;
                        nextCol = word.col;
                    }
                }

                // Находим следующую клетку
                const nextInput = document.querySelector(`input[data-row="${nextRow}"][data-col="${nextCol}"]`);
                if (nextInput) {
                    nextInput.focus();
                }
            }
            // Инициализация монет при загрузке страницы
let gameCurrency = localStorage.getItem('crosswordCoins') || 100; // По умолчанию 100 монет
gameCurrency = parseInt(gameCurrency);

// Функция для обновления и сохранения монет
function updateCurrency(amount) {
    gameCurrency += amount;
    localStorage.setItem('crosswordCoins', gameCurrency);
    updateCurrencyDisplay();
}

// Функция обновления отображения
function updateCurrencyDisplay() {
    const currencyElement = document.getElementById('currency-display');
    currencyElement.textContent = `💰 ${gameCurrency}`;

    // Анимация при изменении
    currencyElement.classList.add('coin-update');
    setTimeout(() => currencyElement.classList.remove('coin-update'), 500);
}

// Инициализация при загрузке
document.addEventListener('DOMContentLoaded', function() {
    updateCurrencyDisplay();

    // Пример использования:
    // При правильном ответе: updateCurrency(10);
    // При покупке подсказки: updateCurrency(-5);
});
// Проверяем достаточно ли монет
if (gameCurrency >= hintPrice) {
    updateCurrency(-hintPrice);
    // Показываем подсказку
} else {
    alert("Недостаточно монет!");
}
        }
    </script>
</body>
</html>